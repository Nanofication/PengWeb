{% extends 'home.html' %}

{% block title %}Products - PengWeb{% endblock %}

{% block content %}

<h2>Add New Product</h2>

<!-- Flash messages -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flash">
      {% for msg in messages %}
        <li>{{ msg }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<form method="POST" action="/products">
    <label>Name:</label><br>
    <input type="text" name="name" required><br>

    <label>Image URL:</label><br>
    <input type="text" name="image_url"><br>

    <label>Price ($):</label><br>
    <input type="number" name="price" step="0.01" required><br>

    <label>Minimum Order Quantity:</label><br>
    <input type="number" name="min_order_qty" required><br>

    <label>Details:</label><br>
    <input type="text" name="details"><br><br>

    <button type="submit">Add Product</button>
</form>

<hr>

<h2>Product List</h2>

<div class="product-grid">
  {% for product in products %}
    <div class="product-card">
        <img src="{{ product.image_url }}" alt="{{ product.name }}" width="200"><br>
        <h3>{{ product.name }}</h3>
        <p><strong>Price:</strong> ${{ product.price }}</p>
        <p><strong>Min Order:</strong> {{ product.min_order_qty }}</p>
        <p>{{ product.details }}</p>

        <form method="POST" action="/products/delete/{{ product.id }}" onsubmit="return confirm('Are you sure you want to delete this product?');">
            <button type="submit">Delete</button>
        </form>
    </div>
  {% endfor %}
</div>

{% endblock %}
